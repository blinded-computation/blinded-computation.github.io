
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3c.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="content-style-type" content="text/css">
        <meta http-equiv="content-script-type" content="text/javascript">
        <meta name=generator content="Sphinx">
        <meta name=viewport content="width=device-width,initial-scale=1.0">
        <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

        <title>fslit: Utilities for writing and rendering literate F* programs &mdash; BliME formal model  documentation</title>

        
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/main.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/genericons.css" type="text/css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/codemirror.min.css" type="text/css" /><link rel="stylesheet" href="../../../_static/cm.tango.css" type="text/css" /><link rel="stylesheet" href="../../../_static/fslit.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/mobile.css" type="text/css" media="only screen and (max-device-width: 568px)">
        
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.36.0/codemirror.min.js"></script>
    <script type="text/javascript" src="../../../_static/fstar.cm.js"></script>
    <script type="text/javascript" src="../../../_static/fslit.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/backtop.js"></script>

    </head>
    <body>
    <div class="content">
        <header id="top-header">
            <div class="left">
    <ul class="breadcrumb">
        <li>
            <a href="../../../index.html">BliME formal model  documentation</a>
             &raquo;
        </li> 
    </ul>
            </div>
            <div class="right">
                
    <ul class="relative">
      <li >
            <a href="../../../genindex.html" title="General Index"
               class="icon-index"
                accesskey="I"></a>
        </li>
    </ul>
            </div>
            <div class="clearer"></div>
        </header>
        

        <div class="documentwrapper">
        <div class="sidebarwrapper">
            <div class="sidebar">
                    <h3><a href="../../../index.html">Top</a></h3><nav class="localtoc">
      <ul>
<li><a class="reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">fslit</span></code>: Utilities for writing and rendering literate F* programs</a><ul>
<li><a class="reference internal" href="#setting-up">Setting up</a></li>
<li><a class="reference internal" href="#writing-literate-f-files">Writing literate F* files</a><ul>
<li><a class="reference internal" href="#emacs-support">Emacs support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#compiling-literate-f-files">Compiling literate F* files</a><ul>
<li><a class="reference internal" href="#docutils">Docutils</a></li>
<li><a class="reference internal" href="#sphinx">Sphinx</a></li>
<li><a class="reference internal" href="#f-js-making-your-literate-f-documents-interactive">F*.js (making your literate F* documents interactive)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#literate-f-roles-and-directives">Literate F* roles and directives</a><ul>
<li><a class="reference internal" href="#directives">Directives</a></li>
<li><a class="reference internal" href="#roles">Roles</a></li>
</ul>
</li>
<li><a class="reference internal" href="#literate-f-syntax-notes">Literate F* syntax notes</a></li>
</ul>
</li>
</ul>

</nav><div class="relative">
</div>
  <h4>This Page</h4>
  <a href="../../../_sources/fstar-mode.el/etc/fslit/README.template.rst.txt"
           rel="nofollow">Show Source</a>
<div id="searchbox" style="display: none">
  <h5>Quick search</h5>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder=' quick search' />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
            </div>
        </div>
            <div class="document">
                <div class="body">
                    
    <section id="fslit-utilities-for-writing-and-rendering-literate-f-programs">
<h1><code class="docutils literal notranslate"><span class="pre">fslit</span></code>: Utilities for writing and rendering literate F* programs<a class="headerlink" href="#fslit-utilities-for-writing-and-rendering-literate-f-programs" title="Permalink to this headline">¶</a></h1>
<section id="setting-up">
<h2>Setting up<a class="headerlink" href="#setting-up" title="Permalink to this headline">¶</a></h2>
<p>Install <code class="docutils literal notranslate"><span class="pre">docutils</span></code> and <code class="docutils literal notranslate"><span class="pre">sphinx</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">user</span> <span class="n">docutils</span> <span class="n">sphinx</span>
</pre></div>
</div>
<p>… then clone this repository.</p>
</section>
<section id="writing-literate-f-files">
<h2>Writing literate F* files<a class="headerlink" href="#writing-literate-f-files" title="Permalink to this headline">¶</a></h2>
<p>Literate F* files are interleavings of F* code and lines prefixed with <code class="docutils literal notranslate"><span class="pre">///</span></code>
(called literate comments).  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">///</span> <span class="n">Let</span><span class="s1">&#39;s start with a simple program:    ← This is a literate comment</span>

<span class="p">(</span><span class="o">**</span> <span class="n">Compute</span> <span class="n">the</span> <span class="n">average</span> <span class="n">of</span> <span class="p">[</span><span class="n">nums</span><span class="p">]</span><span class="o">.</span> <span class="o">**</span><span class="p">)</span>
<span class="n">let</span> <span class="n">avg</span> <span class="n">nums</span> <span class="o">=</span>
  <span class="nb">sum</span> <span class="n">nums</span> <span class="o">/</span> <span class="n">List</span><span class="o">.</span><span class="n">length</span> <span class="n">nums</span>
</pre></div>
</div>
<p>Literate comments are written in reStructuredText (reST): the example above maps
to the following reST document:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Let</span><span class="s1">&#39;s start with a simple program:</span>

<span class="o">..</span> <span class="n">fst</span><span class="p">::</span>

   <span class="p">(</span><span class="o">**</span> <span class="n">Compute</span> <span class="n">the</span> <span class="n">average</span> <span class="n">of</span> <span class="p">[</span><span class="n">nums</span><span class="p">]</span><span class="o">.</span> <span class="o">**</span><span class="p">)</span>
   <span class="n">let</span> <span class="n">avg</span> <span class="n">nums</span> <span class="o">=</span>
     <span class="nb">sum</span> <span class="n">nums</span> <span class="o">/</span> <span class="n">List</span><span class="o">.</span><span class="n">length</span> <span class="n">nums</span>
</pre></div>
</div>
<p>Consult the <a class="reference external" href="https://www.sphinx-doc.org/en/stable/rest.html">reStructuredText quick start guide</a> for general information about
reST, and the following sections for details on F*-specific directives.</p>
<section id="emacs-support">
<h3>Emacs support<a class="headerlink" href="#emacs-support" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">fstar-mode</span></code> displays literate comment markers as a solid line in the margin
(┃), and highlights reST syntax errors in literate comments as you type (using
<code class="docutils literal notranslate"><span class="pre">fslit</span></code>’s <code class="docutils literal notranslate"><span class="pre">lint.py</span></code> script).</p>
<p>Additionally, pressing <code class="docutils literal notranslate"><span class="pre">C-c</span> <span class="pre">C-S-a</span></code> (<kbd class="kbd docutils literal notranslate">Ctrl</kbd> <kbd class="kbd docutils literal notranslate">c</kbd>, <kbd class="kbd docutils literal notranslate">Ctrl</kbd>
<kbd class="kbd docutils literal notranslate">Shift</kbd> <kbd class="kbd docutils literal notranslate">a</kbd>) in <code class="docutils literal notranslate"><span class="pre">fstar-mode</span></code> toggles between literate F* sources
and a reST version of the same document, suitable for large reST edits (read the
documentation of <code class="docutils literal notranslate"><span class="pre">rst-mode</span></code> with <cite>C-h f rst-mode</cite> to learn about editing reST
files in Emacs, or read the <a class="reference external" href="http://docutils.sourceforge.net/docs/user/emacs.html">online manual</a>).</p>
</section>
</section>
<section id="compiling-literate-f-files">
<h2>Compiling literate F* files<a class="headerlink" href="#compiling-literate-f-files" title="Permalink to this headline">¶</a></h2>
<section id="docutils">
<h3>Docutils<a class="headerlink" href="#docutils" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">fslit/fst2html.py</span></code> script to render a literate F* file as a standalone HTML file.  This works well for quick experiments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ fslit/fst2html.py example.fst &gt; example.html
</pre></div>
</div>
<p>From Emacs, simply run <cite>M-x fstar-literate-preview</cite>.</p>
</section>
<section id="sphinx">
<h3>Sphinx<a class="headerlink" href="#sphinx" title="Permalink to this headline">¶</a></h3>
<p>For larger examples, use Sphinx (they have a good <a class="reference external" href="http://www.sphinx-doc.org/en/stable/tutorial.html">tutorial</a>). Here is how to create a
new Sphinx project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ mkdir fstar-book; cd fstar-book/

$ git clone --depth 1 https://github.com/FStarLang/fstar-mode.el
… Checking connectivity... done.

$ sphinx-quickstart --ext-mathjax --extensions fslit.sphinx4fstar \
    --quiet --author &#39;&lt;you&gt;&#39; --project &#39;&lt;proj-name&gt;&#39;
</pre></div>
</div>
<p>Open the generated <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> file, and insert the following after the comment saying <em>If extensions […] are in another directory, add these directories to sys.path here.</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;fstar-mode.el/etc/&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>You can now create literate F* documents (e.g. <code class="docutils literal notranslate"><span class="pre">Induction.fst</span></code>,
<code class="docutils literal notranslate"><span class="pre">RecTypes.fst</span></code>) and add them to the <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">toctree::</span></code> directive in
<code class="docutils literal notranslate"><span class="pre">index.rst</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">toctree</span><span class="p">::</span>

   <span class="n">Induction</span>
   <span class="n">RecTypes</span>
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">html</span></code> to confirm that everything is working (generated files are in
<code class="docutils literal notranslate"><span class="pre">_build/html/index.html</span></code>) and <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">http.server</span></code> to serve the website
locally (at <code class="docutils literal notranslate"><span class="pre">http://localhost:8000/</span></code>).</p>
</section>
<section id="f-js-making-your-literate-f-documents-interactive">
<h3>F*.js (making your literate F* documents interactive)<a class="headerlink" href="#f-js-making-your-literate-f-documents-interactive" title="Permalink to this headline">¶</a></h3>
<p>Documents built by <code class="docutils literal notranslate"><span class="pre">fslit</span></code> can be turned into interactive proofs using <a class="reference external" href="https://github.com/cpitclaudel/fstar.js">F*.js</a>, a JavaScript build of F*.  Its
README explains how to set things up manually, but <code class="docutils literal notranslate"><span class="pre">fslit</span></code> comes with a Sphinx
plug-in to make it easier.</p>
<p>With a properly configured Sphinx project, the following steps should be enough:</p>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">&quot;fslit.js&quot;</span></code> to <code class="docutils literal notranslate"><span class="pre">extensions</span></code> in <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>.</p></li>
<li><p>Download an F*.js release, and copy or symlink the <code class="docutils literal notranslate"><span class="pre">fstar.js</span></code> folder to
your Sphinx project’s <code class="docutils literal notranslate"><span class="pre">_static</span></code> directory.</p></li>
<li><p>Rebuild your Sphinx project.</p></li>
</ul>
<p>You’ll need to run <code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">-m</span> <span class="pre">http.server</span></code> to browse the results: WebWorkers
can’t (as of 2018-03) run from <code class="docutils literal notranslate"><span class="pre">file://</span></code> addresses.</p>
</section>
</section>
<section id="literate-f-roles-and-directives">
<h2>Literate F* roles and directives<a class="headerlink" href="#literate-f-roles-and-directives" title="Permalink to this headline">¶</a></h2>
<section id="directives">
<h3>Directives<a class="headerlink" href="#directives" title="Permalink to this headline">¶</a></h3>
<p>[DIRECTIVES]</p>
</section>
<section id="roles">
<h3>Roles<a class="headerlink" href="#roles" title="Permalink to this headline">¶</a></h3>
<p>[ROLES]</p>
</section>
</section>
<section id="literate-f-syntax-notes">
<h2>Literate F* syntax notes<a class="headerlink" href="#literate-f-syntax-notes" title="Permalink to this headline">¶</a></h2>
<p>By default, code blocks are placed at the same indentation level as the last
preceding text:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/// .. note::
///
///    The following code is captured in the note:

let a = 1

↓

.. note::

   The following code is captured in the note:

   .. fst::

      let a = 1
</pre></div>
</div>
<p>You can avoid this using an explicit <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">fst::</span></code> marker:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/// .. note::
///
///    The following code is not captured in the note.
///
/// .. fst::

let a = 1

↓

.. note::

   The following code is not captured in the note.

.. fst::

   let a = 1
</pre></div>
</div>
<p>This problem can be particularly confusing with <code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">code::</span></code> directives:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/// .. code:: c
///
///    int main() {}

let a = 1

↓ This is probably not what you want

.. code:: c

   int main() {}

   .. fst::

      let a = 1
</pre></div>
</div>
</section>
</section>

    <div id="raise-top"></div>

                </div>
            </div> <!-- document -->


        </div> <!-- documentwrapper -->
        <footer>
            <p class="show-copyright">
                &copy; Copyright 2022.
            </p>
            <p class="show-sphinx">
              Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.4.3.
            </p>
            
              <p class="theme-info"><a href="https://pypi.python.org/pypi/hachibee-sphinx-theme">Sphinx-hachibee-theme</a> is hosted on <a href="https://github.com/hachibeeDI/Sphinx-hachibee-theme">Github</a></p>
            
        </footer>
    </div>
    <script type="text/javascript" src="../../../_static/main.js" async></script>
    </body>
</html>
